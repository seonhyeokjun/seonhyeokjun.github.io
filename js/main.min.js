var classicLayout=!1,portfolioKeyword,$container,$blog_container;!function($){var inAnimation,outAnimation,pActive;function initialize(){inAnimation=$("html").attr("data-inAnimation"),outAnimation=$("html").attr("data-outAnimation")}function setup(){setupLigtbox(),$(".prettyprint").length&&window.prettyPrint&&prettyPrint(),$(".tabs").each((function(){$(this).find(".tab-titles li a.active").length?$(this).find(".tab-content > div").eq($(this).find(".tab-titles li a.active").parent().index()).show():($(this).find(".tab-titles li:first-child a").addClass("active"),$(this).find(".tab-content > div:first-child").show())})),$(".tabs .tab-titles li a").click((function(){if(!$(this).hasClass("active"))return $(this).parent().siblings().find("a").removeClass("active"),$(this).addClass("active"),$(this).parents(".tabs").find(".tab-content > div").hide().eq($(this).parent().index()).show(),!1}));var toggleSpeed=300;$(".toggle h4.active + .toggle-content").show(),$(".toggle h4").click((function(){return $(this).hasClass("active")?($(this).removeClass("active"),$(this).next(".toggle-content").stop(!0,!0).slideUp(300)):($(this).addClass("active"),$(this).next(".toggle-content").stop(!0,!0).slideDown(300),$(this).parents(".toggle-group").hasClass("accordion")&&($(this).parent().siblings().find("h4").removeClass("active"),$(this).parent().siblings().find(".toggle-content").stop(!0,!0).slideUp(300))),!1})),$(".media-wrap, .portfolio-single").length&&$(".media-wrap, .portfolio-single").fitVids();var $flexslider=$(".flexslider");$flexslider.length&&$flexslider.each((function(){$(this).imagesLoaded((function(){$(this).find(".loading").remove(),$(this).flexslider({smoothHeight:!0,slideshow:"false"!=$(this).attr("data-autoplay"),slideshowSpeed:$(this).attr("data-interval"),animationSpeed:$(this).attr("data-animationSpeed"),animation:$(this).attr("data-animation"),direction:$(this).attr("data-direction"),directionNav:"false"!=$(this).attr("data-directionNav"),controlNav:"false"!=$(this).attr("data-controlNav"),randomize:"true"==$(this).attr("data-randomize"),startAt:null!=$(this).attr("data-startAt")?parseInt($(this).attr("data-startAt")):0,animationLoop:"false"!=$(this).attr("data-animationLoop"),pauseOnHover:"false"!=$(this).attr("data-pauseOnHover"),reverse:"true"==$(this).attr("data-reverse"),prevText:"",nextText:"",start:function(slider){slider.find("li img").click((function(event){event.preventDefault(),slider.flexAnimate(slider.getTarget("next"))}))}})}))})),$("video,audio").length&&$("video,audio").mediaelementplayer({audioHeight:50})}function setActivePage(){$(".page").removeClass("active").hide();var path=$.address.path();if(path=path.slice(1,path.length),""==(path=-1!=giveDetailUrl()?portfolioKeyword:path)){var firstPage=$(".vs-nav li").first().find("a").attr("href");return path=firstPage.slice(2,firstPage.length),$.address.path(path),!1}$("#"+path).fadeIn(),$(".page.active").hide(),$("#"+path).addClass("active"),setCurrentMenuItem(),-1!=path.indexOf(portfolioKeyword)&&setTimeout((function(){setMasonry()}),100),$("body").scrollTop(0)}function setMasonry(){var masonry=$(".portfolio-items, .latest-posts");masonry.length&&masonry.each((function(index,el){if(refreshMasonry(),$(el).imagesLoaded((function(){$(el).isotope({layoutMode:$(el).data("layout")?$(el).data("layout"):"masonry"}),refreshMasonry()})),!$(el).data("isotope")){var filters=$(el).siblings(".filters");filters.length&&filters.find("a").on("click",(function(){var selector=$(this).attr("data-filter");return $(el).isotope({filter:selector}),$(this).parent().addClass("current").siblings().removeClass("current"),!1}))}}))}function refreshMasonry(){var masonry=$(".portfolio-items, .latest-posts");masonry.length&&masonry.each((function(index,el){if($(el).data("isotope")){var itemW=360,containerW=$(el).width(),items=$(el).children(".hentry"),columns=Math.round(containerW/360);items.each((function(index,element){var multiplier=$(this).hasClass("x2")&&columns>1?2:1,itemRealWidth=100*Math.floor(containerW/columns)/containerW*multiplier;$(this).css("width",itemRealWidth+"%")}));var columnWidth=Math.floor(containerW/columns);$(el).isotope("option",{masonry:{columnWidth:columnWidth}}),$(el).isotope("layout")}}))}function fillBars(){$(".bar").each((function(){var bar=$(this);bar.find(".progress").css("width",bar.attr("data-percent")+"%")}))}function setupLigtbox(){$(".lightbox").each((function(index,element){$(this).attr("rel",$(this).attr("data-lightbox-gallery"))})),$("a[rel^='fancybox']").length&&$("a[rel^='fancybox']").fancybox({centerOnScroll:!0,padding:10,margin:44,width:640,height:360,transitionOut:"none",overlayColor:"#BEBD97",overlayOpacity:".6",onStart:function(){$("body").addClass("lightbox-active")},onClosed:function(){$("body").removeClass("lightbox-active")},onComplete:function(){$(this).attr("href").indexOf("soundcloud.com")>=0&&$("#fancybox-content").height(166)}})}function setCurrentMenuItem(){var activePageId=$(".page.active").attr("id");$(".vs-nav a[href$="+activePageId+"]").parent().addClass("current_page_item").siblings().removeClass("current_page_item")}function showProjectDetails(url){showLoader();var p=$(".p-overlay:not(.active)").first();(pActive=$(".p-overlay.active")).length&&hideProjectDetails(),p.empty().load(url+" .portfolio-single",(function(){p.imagesLoaded((function(){hideLoader(),$("html").addClass("p-overlay-on"),$("body").scrollTop(0),setup(),Modernizr.csstransforms&&Modernizr.csstransforms3d?p.removeClass("animated "+outAnimation+" "+inAnimation).addClass("animated "+inAnimation).show():p.fadeIn(),p.addClass("active")}))}))}function hideProjectDetails(forever,safeClose){$("html").removeClass("p-overlay-on"),forever&&(pActive=$(".p-overlay.active"),safeClose||($.address.path(portfolioKeyword),$("body").scrollTop(0))),pActive.removeClass("active"),Modernizr.csstransforms&&Modernizr.csstransforms3d?(pActive.removeClass("animated "+inAnimation).addClass("animated "+outAnimation),setTimeout((function(){pActive.hide().removeClass(outAnimation).empty()}),1010)):pActive.fadeOut().empty()}function giveDetailUrl(){var address=$.address.value(),detailUrl;if(-1!=address.indexOf("/"+portfolioKeyword+"/")&&address.length>portfolioKeyword.length+2){var total=address.length;detailUrl=address.slice(portfolioKeyword.length+2,total)}else detailUrl=-1;return detailUrl}$((function(){setMasonry();var rotate_words=$(".rotate-words");rotate_words.length&&(Modernizr.csstransforms?rotate_words.each((function(index,element){$(element).find("span").eq(0).addClass("active"),setInterval((function(){next_word_index=$(element).find(".active").next().length?$(element).find(".active").next().index():0,$(element).find(".active").addClass("rotate-out").removeClass("rotate-in active"),$(element).find("span").eq(next_word_index).addClass("rotate-in active").removeClass("rotate-out")}),3e3)})):rotate_words.each((function(index,element){$(element).find("span").eq(0).addClass("active").show(),setInterval((function(){next_word_index=$(element).find(".active").next().length?$(element).find(".active").next().index():0,$(element).find(".active").removeClass("active").slideUp(500),$(element).find("span").eq(next_word_index).addClass("active").slideDown(500)}),3e3)})));var latest_tweets=$("#latest-tweets");if(latest_tweets.length){var config={profile:{screenName:latest_tweets.data("twitter-name")},domId:"",maxTweets:latest_tweets.data("tweet-count"),enableLinks:!0,showUser:!1,showTime:!0,dateFunction:"",showRetweet:latest_tweets.data("include-retweets"),customCallback:handleTweets,showInteraction:!1};function handleTweets(tweets){for(var x=tweets.length,n=0,html="<ul>";n<x;)html+="<li>"+tweets[n]+"</li>",n++;html+="</ul>",latest_tweets.html(html)}twitterFetcher.fetch(config)}if($(".search-link").click((function(){$(this).toggleClass("active"),$(".header-search").slideToggle()})),$("html").hasClass("one-page-layout")){portfolioKeyword=$("section.portfolio").attr("id"),initialize();var detailUrl=giveDetailUrl(),pagesCount=$(".wrapper > section").length,isIE11=!!navigator.userAgent.match(/Trident\/7\./);(classicLayout=(classicLayout=(classicLayout="true"===$("html").attr("data-classic-layout"))||"true"===$("html").attr("data-mobile-only-classic-layout")&&$(window).width()<768)||!Modernizr.csstransforms3d||pagesCount<3||isIE11)&&($("html").addClass("classic-layout"),setActivePage(),setTimeout((function(){setMasonry()}),600),$.address.change((function(){setActivePage(),setTimeout((function(){setMasonry()}),100)}))),$.initTripleLayout(),setTimeout((function(){refreshMasonry()}),300);var prevUrl=-1;$.address.change((function(){var detailUrl=giveDetailUrl();-1!=detailUrl?showProjectDetails(detailUrl):-1!=$.address.path().indexOf("/"+portfolioKeyword)&&hideProjectDetails(!0,-1==prevUrl),prevUrl=giveDetailUrl()}))}setup(),$(".one-page-layout a.ajax").live("click",(function(){var returnVal,url=$(this).attr("href"),baseUrl=$.address.baseURL();if(-1!=url.indexOf(baseUrl)){var total=url.length;detailUrl=url.slice(baseUrl.length+1,total)}else detailUrl=url;return $.address.path(portfolioKeyword+"/"+detailUrl),!1})),fillBars(),$(".tooltip").each((function(index,element){$(this).tooltipster({position:$(this).attr("data-tooltip-pos"),fixedWidth:300,offsetX:0,animation:"grow",delay:50})}))})),window.onload=function(){},$(window).on("resize debouncedresize",(function(){refreshMasonry(),setTimeout((function(){refreshMasonry()}),1e3)}))}(jQuery);